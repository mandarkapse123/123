<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novel Writer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav id="main-nav" class="nav-bar">
            <div class="nav-brand">
                <h1>üìñ Novel Writer</h1>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-view="writer">Write</button>
                <button class="nav-btn" data-view="organizer">Organize</button>
                <button class="nav-btn" data-view="characters">Characters</button>
                <button class="nav-btn" data-view="outline">Outline</button>
                <button class="nav-btn" data-view="goals">Goals</button>
                <button class="nav-btn" data-view="research">Research</button>
                <button class="nav-btn" data-view="timeline">Timeline</button>
                <button class="nav-btn" data-view="stats">Stats</button>
            </div>
            <div class="nav-controls">
                <button id="search-btn" class="icon-btn" title="Global Search">üîç</button>
                <button id="theme-toggle" class="icon-btn" title="Toggle Theme">üåô</button>
                <button id="focus-mode" class="icon-btn" title="Focus Mode">üéØ</button>
                <button id="export-btn" class="icon-btn" title="Export">üì§</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Writer View -->
            <div id="writer-view" class="view active">
                <div class="writer-container">
                    <div class="writer-header">
                        <div class="writer-selectors">
                            <select id="chapter-select" class="chapter-selector">
                                <option value="">Select Chapter</option>
                            </select>
                            <select id="scene-select" class="scene-selector">
                                <option value="">Select Scene</option>
                            </select>
                            <div class="save-location" id="save-location">
                                üíæ Create a chapter first to save your work
                            </div>
                        </div>
                        <div class="writer-controls">
                            <button id="session-timer-btn" class="control-btn" title="Start Writing Session">‚è±Ô∏è Start Session</button>
                            <button id="character-panel-btn" class="control-btn" title="Character Reference">üë• Characters</button>
                        </div>
                        <div class="writer-stats">
                            <span id="word-count">0 words</span>
                            <span id="char-count">0 chars</span>
                            <span id="session-words">Session: 0</span>
                            <span id="session-timer" class="session-timer hidden">25:00</span>
                        </div>
                    </div>
                    <div class="writing-area">
                        <div id="character-panel" class="character-panel hidden">
                            <div class="panel-header">
                                <h4>üìö Character Reference</h4>
                                <button class="close-panel" onclick="writer.toggleCharacterPanel()">‚úï</button>
                            </div>
                            <div id="character-list" class="character-list">
                                <!-- Characters will be loaded here -->
                            </div>
                        </div>
                        <textarea id="main-editor" placeholder="Start writing your story..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Organizer View -->
            <div id="organizer-view" class="view">
                <div class="organizer-container">
                    <div class="organizer-header">
                        <h2>Project Structure</h2>
                        <button id="add-chapter" class="btn-primary">+ Add Chapter</button>
                    </div>
                    <div class="project-tree" id="project-tree">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Characters View -->
            <div id="characters-view" class="view">
                <div class="characters-container">
                    <div class="characters-header">
                        <h2>Characters</h2>
                        <button id="add-character" class="btn-primary">+ Add Character</button>
                    </div>
                    <div class="characters-grid" id="characters-grid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Outline View -->
            <div id="outline-view" class="view">
                <div class="outline-container">
                    <div class="outline-header">
                        <h2>Plot Outline</h2>
                        <button id="add-plot-point" class="btn-primary">+ Add Plot Point</button>
                    </div>
                    <div class="outline-board" id="outline-board">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Goals View -->
            <div id="goals-view" class="view">
                <div class="goals-container">
                    <div class="goals-header">
                        <h2>Writing Goals</h2>
                        <button id="add-goal" class="btn-primary">+ Add Goal</button>
                    </div>
                    <div class="goals-dashboard" id="goals-dashboard">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Research View -->
            <div id="research-view" class="view">
                <div class="research-container">
                    <div class="research-header">
                        <h2>Research Notes</h2>
                        <button id="add-research" class="btn-primary">+ Add Note</button>
                    </div>
                    <div class="research-grid" id="research-grid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Timeline View -->
            <div id="timeline-view" class="view">
                <div class="timeline-container">
                    <div class="timeline-header">
                        <h2>Story Timeline</h2>
                        <button id="add-event" class="btn-primary">+ Add Event</button>
                    </div>
                    <div class="timeline-board" id="timeline-board">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Stats View -->
            <div id="stats-view" class="view">
                <div class="stats-container">
                    <div class="stats-header">
                        <h2>Writing Statistics</h2>
                    </div>
                    <div class="stats-dashboard" id="stats-dashboard">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal-container"></div>

    <!-- Global Search Modal -->
    <div id="search-modal" class="search-modal hidden">
        <div class="search-container">
            <div class="search-header">
                <input type="text" id="search-input" placeholder="Search across all content..." autofocus>
                <button class="close-search" onclick="app.closeSearch()">‚úï</button>
            </div>
            <div class="search-results" id="search-results">
                <div class="search-placeholder">
                    Type to search across chapters, scenes, characters, and notes...
                </div>
            </div>
        </div>
    </div>

    <!-- Session Goal Modal -->
    <div id="session-modal" class="session-modal hidden">
        <div class="session-container">
            <h3>üéØ Start Writing Session</h3>
            <div class="session-options">
                <div class="goal-option">
                    <label>
                        <input type="radio" name="session-type" value="time" checked>
                        ‚è∞ Time-based (Pomodoro)
                    </label>
                    <select id="time-duration">
                        <option value="25">25 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="45">45 minutes</option>
                        <option value="60">1 hour</option>
                    </select>
                </div>
                <div class="goal-option">
                    <label>
                        <input type="radio" name="session-type" value="words">
                        üìù Word count goal
                    </label>
                    <input type="number" id="word-goal" placeholder="500" min="50" step="50">
                </div>
            </div>
            <div class="session-actions">
                <button class="btn-secondary" onclick="app.closeSessionModal()">Cancel</button>
                <button class="btn-primary" onclick="app.startWritingSession()">Start Session</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="storage.js"></script>
    <script src="components/writer.js"></script>
    <script src="components/organizer.js"></script>
    <script src="components/characters.js"></script>
    <script src="components/outline.js"></script>
    <script src="components/goals.js"></script>
    <script src="components/research.js"></script>
    <script src="components/timeline.js"></script>
    <script src="components/stats.js"></script>
    <script src="app.js"></script>
</body>
</html>
