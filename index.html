<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryForge</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Source+Sans+Pro:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav id="main-nav" class="nav-bar">
            <div class="nav-brand">
                <h1>‚úçÔ∏è StoryForge</h1>
                <div class="book-title" id="book-title-display">
                    <span id="book-title-text">Click to set book title</span>
                    <button id="edit-book-title" class="edit-title-btn" title="Edit Book Title">‚úèÔ∏è</button>
                </div>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-view="writer">Write</button>
                <button class="nav-btn" data-view="organizer">Organize</button>
                <button class="nav-btn" data-view="characters">Characters</button>
                <button class="nav-btn" data-view="outline">Outline</button>
                <button class="nav-btn" data-view="goals">Goals</button>
                <button class="nav-btn" data-view="research">Research</button>
                <button class="nav-btn" data-view="ideas">Ideas</button>
                <button class="nav-btn" data-view="timeline">Timeline</button>
                <button class="nav-btn" data-view="stats">Stats</button>
            </div>
            <div class="nav-controls">
                <button id="font-toggle" class="icon-btn" title="Change Font">üé®</button>
                <button id="search-btn" class="icon-btn" title="Global Search">üîç</button>
                <button id="theme-toggle" class="icon-btn" title="Toggle Theme">üåô</button>
                <button id="focus-mode" class="icon-btn" title="Focus Mode">üéØ</button>
                <button id="import-btn" class="icon-btn" title="Import Data">üì•</button>
                <button id="export-btn" class="icon-btn" title="Export">üì§</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Writer View -->
            <div id="writer-view" class="view active">
                <div id="milestone-badge" class="milestone-badge hidden"></div>
                <div class="writer-container">
                    <div class="writer-header">
                        <!-- Place this where you want the font selector, e.g., in .writer-header -->
<select id="font-selector">
    <option value="Georgia">Georgia</option>
    <option value="Times New Roman">Times New Roman</option>
    <option value="Inter">Inter</option>
    <option value="JetBrains Mono">JetBrains Mono</option>
</select>
                        <div class="writer-selectors">
                            <select id="chapter-select" class="chapter-selector">
                                <option value="">Select Chapter</option>
                            </select>
                            <select id="scene-select" class="scene-selector">
                                <option value="">Select Scene</option>
                            </select>
                            <div class="save-location" id="save-location">
                                <div id="writing-goal-progress" class="goal-progress-bar">
    <div class="goal-progress-fill" style="width: 0%"></div>
</div>
                                üíæ Create a chapter first to save your work
                            </div>
                        </div>
                        <div class="writer-controls">
                            <button id="session-timer-btn" class="control-btn" title="Start Writing Session">‚è±Ô∏è Start Session</button>
                            <button id="character-panel-btn" class="control-btn" title="Character Reference">üë• Characters</button>
                        </div>
                        <div class="writer-stats">
                            <span id="word-count">0 words</span>
                            <span id="char-count">0 chars</span>
                            <span id="session-words">Session: 0</span>
                            <span id="session-timer" class="session-timer hidden">25:00</span>
                        </div>
                    </div>
                    <div class="writing-area">
                        <div id="character-panel" class="character-panel hidden">
                            <div class="panel-header">
                                <h4>üìö Character Reference</h4>
                                <button class="close-panel" onclick="writer.toggleCharacterPanel()">‚úï</button>
                            </div>
                            <div id="character-list" class="character-list">
                                <!-- Characters will be loaded here -->
                            </div>
                        </div>
                        <textarea id="main-editor" placeholder="Start writing your story..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Organizer View -->
            <div id="organizer-view" class="view">
                <div class="organizer-container">
                    <div class="organizer-header">
                        <h2>Project Structure</h2>
                        <button id="add-chapter" class="btn-primary">+ Add Chapter</button>
                    </div>
                    <div class="project-tree" id="project-tree">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Characters View -->
            <div id="characters-view" class="view">
                <div class="characters-container">
                    <div class="characters-header">
                        <h2>Characters</h2>
                        <button id="add-character" class="btn-primary">+ Add Character</button>
                    </div>
                    <div class="characters-grid" id="characters-grid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Outline View -->
            <div id="outline-view" class="view">
                <div class="outline-container">
                    <div class="outline-header">
                        <h2>Plot Outline</h2>
                        <button id="add-plot-point" class="btn-primary">+ Add Plot Point</button>
                    </div>
                    <div class="outline-board" id="outline-board">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Goals View -->
            <div id="goals-view" class="view">
                <div class="goals-container">
                    <div class="goals-header">
                        <h2>Writing Goals</h2>
                        <button id="add-goal" class="btn-primary">+ Add Goal</button>
                    </div>
                    <div class="goals-dashboard" id="goals-dashboard">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Research View -->
            <div id="research-view" class="view">
                <div class="research-container">
                    <div class="research-header">
                        <h2>Research Notes</h2>
                        <button id="add-research" class="btn-primary">+ Add Note</button>
                    </div>
                    <div class="research-grid" id="research-grid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Ideas View -->
            <div id="ideas-view" class="view">
                <div class="ideas-container">
                    <div class="ideas-header">
                        <h2>üí° Ideas & Notes</h2>
                        <div class="ideas-controls">
                            <button id="export-ideas" class="btn-secondary">üì§ Export</button>
                            <button id="clear-ideas" class="btn-secondary">üóëÔ∏è Clear</button>
                            <div class="ideas-stats">
                                <span id="ideas-word-count">0 words</span>
                                <span id="ideas-save-status">Auto-saved</span>
                            </div>
                        </div>
                    </div>
                    <div class="ideas-workspace">
                        <div class="ideas-main">
                            <textarea id="ideas-textarea" placeholder="üí≠ Your creative playground...

This is your space for:
‚Ä¢ Random story ideas and plot twists
‚Ä¢ Character names and personality notes
‚Ä¢ Dialogue snippets you want to remember
‚Ä¢ Copy-paste inspiration from anywhere
‚Ä¢ Quick notes while reading/researching
‚Ä¢ Stream of consciousness writing
‚Ä¢ Plot holes you need to fix
‚Ä¢ Scene ideas for later chapters

No structure needed - just let your creativity flow! ‚ú®"></textarea>
                        </div>
                        <div class="ideas-sidebar">
                            <h4>üìù Quick Ideas</h4>
                            <div class="quick-notes">
                                <button class="note-template" data-template="story">üí° Story Idea</button>
                                <button class="note-template" data-template="character">üé≠ Character</button>
                                <button class="note-template" data-template="dialogue">üí¨ Dialogue</button>
                                <button class="note-template" data-template="scene">üé¨ Scene</button>
                                <button class="note-template" data-template="research">üìö Research</button>
                                <button class="note-template" data-template="todo">üìã To-Do</button>
                            </div>
                            <div class="ideas-tips">
                                <h5>üí° Tips:</h5>
                                <ul>
                                    <li>Use templates above for quick starts</li>
                                    <li>Everything auto-saves as you type</li>
                                    <li>Perfect for copy-paste inspiration</li>
                                    <li>No formatting needed - just write!</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline View -->
            <div id="timeline-view" class="view">
                <div class="timeline-container">
                    <div class="timeline-header">
                        <h2>Story Timeline</h2>
                        <button id="add-event" class="btn-primary">+ Add Event</button>
                    </div>
                    <div class="timeline-board" id="timeline-board">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Stats View -->
            <div id="stats-view" class="view">
                <div class="stats-container">
                    <div class="stats-header">
                        <h2>Writing Statistics</h2>
                    </div>
                    <div class="stats-dashboard" id="stats-dashboard">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal-container"></div>

    <!-- Global Search Modal -->
    <div id="search-modal" class="search-modal hidden">
        <div class="search-container">
            <div class="search-header">
                <input type="text" id="search-input" placeholder="Search across all content..." autofocus>
                <button class="close-search" onclick="app.closeSearch()">‚úï</button>
            </div>
            <div class="search-results" id="search-results">
                <div class="search-placeholder">
                    Type to search across chapters, scenes, characters, and notes...
                </div>
            </div>
        </div>
    </div>

    <!-- Session Goal Modal -->
    <div id="session-modal" class="session-modal hidden">
        <div class="session-container">
            <h3>üéØ Start Writing Session</h3>
            <div class="session-options">
                <div class="goal-option">
                    <label>
                        <input type="radio" name="session-type" value="time" checked>
                        ‚è∞ Time-based (Pomodoro)
                    </label>
                    <select id="time-duration">
                        <option value="25">25 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="45">45 minutes</option>
                        <option value="60">1 hour</option>
                    </select>
                </div>
                <div class="goal-option">
                    <label>
                        <input type="radio" name="session-type" value="words">
                        üìù Word count goal
                    </label>
                    <input type="number" id="word-goal" placeholder="500" min="50" step="50">
                </div>
            </div>
            <div class="session-actions">
                <button class="btn-secondary" onclick="app.closeSessionModal()">Cancel</button>
                <button class="btn-primary" onclick="app.startWritingSession()">Start Session</button>
            </div>
        </div>
    </div>

    <!-- Book Title Modal -->
    <div id="book-title-modal" class="book-title-modal hidden">
        <div class="book-title-container">
            <h3>üìñ Set Your Book Title</h3>
            <form id="book-title-form">
                <div class="form-group">
                    <label for="book-title-input">Book Title</label>
                    <input type="text" id="book-title-input" placeholder="Enter your book title..." maxlength="100">
                </div>
                <div class="form-group">
                    <label for="book-subtitle-input">Subtitle (Optional)</label>
                    <input type="text" id="book-subtitle-input" placeholder="Enter subtitle..." maxlength="100">
                </div>
                <div class="form-group">
                    <label for="book-author-input">Author</label>
                    <input type="text" id="book-author-input" placeholder="Your name..." maxlength="50">
                </div>
                <div class="book-title-actions">
                    <button type="button" class="btn-secondary" onclick="app.closeBookTitleModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Title</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Font Selection Modal -->
    <div id="font-modal" class="font-modal hidden">
        <div class="font-container">
            <h3>üé® Choose Your Writing Font</h3>
            <div class="font-options">
                <div class="font-option" data-font="georgia">
                    <div class="font-preview" style="font-family: Georgia, serif;">
                        <h4>Georgia (Default)</h4>
                        <p>The quick brown fox jumps over the lazy dog. This is a classic serif font perfect for traditional novel writing.</p>
                    </div>
                </div>
                <div class="font-option" data-font="times">
                    <div class="font-preview" style="font-family: 'Times New Roman', serif;">
                        <h4>Times New Roman</h4>
                        <p>The quick brown fox jumps over the lazy dog. A traditional serif font used in many published books.</p>
                    </div>
                </div>
                <div class="font-option" data-font="libre">
                    <div class="font-preview" style="font-family: 'Libre Baskerville', serif;">
                        <h4>Libre Baskerville</h4>
                        <p>The quick brown fox jumps over the lazy dog. A modern serif font with excellent readability.</p>
                    </div>
                </div>
                <div class="font-option" data-font="crimson">
                    <div class="font-preview" style="font-family: 'Crimson Text', serif;">
                        <h4>Crimson Text</h4>
                        <p>The quick brown fox jumps over the lazy dog. An elegant serif font inspired by classic book typography.</p>
                    </div>
                </div>
                <div class="font-option" data-font="inter">
                    <div class="font-preview" style="font-family: 'Inter', sans-serif;">
                        <h4>Inter (Modern)</h4>
                        <p>The quick brown fox jumps over the lazy dog. A clean, modern sans-serif font for contemporary writing.</p>
                    </div>
                </div>
                <div class="font-option" data-font="source">
                    <div class="font-preview" style="font-family: 'Source Sans Pro', sans-serif;">
                        <h4>Source Sans Pro</h4>
                        <p>The quick brown fox jumps over the lazy dog. A professional sans-serif font with great screen readability.</p>
                    </div>
                </div>
                <div class="font-option" data-font="mono">
                    <div class="font-preview" style="font-family: 'JetBrains Mono', monospace;">
                        <h4>JetBrains Mono</h4>
                        <p>The quick brown fox jumps over the lazy dog. A monospace font for a typewriter-like writing experience.</p>
                    </div>
                </div>
            </div>
            <div class="font-actions">
                <button class="btn-secondary" onclick="app.closeFontModal()">Cancel</button>
                <button class="btn-primary" onclick="app.applySelectedFont()">Apply Font</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="storage.js"></script>
    <script src="components/writer.js"></script>
    <script src="components/organizer.js"></script>
    <script src="components/characters.js"></script>
    <script src="components/outline.js"></script>
    <script src="components/goals.js"></script>
    <script src="components/research.js"></script>
    <script src="components/ideas.js"></script>
    <script src="components/timeline.js"></script>
    <script src="components/stats.js"></script>
    <script src="app.js"></script>
</body>
</html>
